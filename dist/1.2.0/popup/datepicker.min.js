!function(){function e(e){var t=function(e){return("00"+e).substr(-2)},i="";i+='<style id="g-datepicker-css">',i+=".g-datepicker {z-index:9999;position:absolute;top:0;left:0;display:none;}",i+=".g-datepicker .g-datepicker-container{width:100%;height:auto;}",i+=".g-datepicker .g-datepicker-title {position:relative;width:100%;height:30px;line-height:30px;}",i+=".g-datepicker .g-datepicker-header {position:relative;width:100%;height:30px;}",i+=".g-datepicker .g-datepicker-header .g-datepicker-day {position:relative;display:inline-block;width:14%;height:30px;text-align:center;line-height:30px;vertical-align:top;}",i+=".g-datepicker .g-datepicker-content {position:relative;width:100%;height:auto;}",i+=".g-datepicker .g-datepicker-content .g-datepicker-date {position:relative;display:inline-block;width:14%;height:30px;text-align:center;line-height:30px;vertical-align:top;}",i+="</style>";var a=[],n=function(t,i){return i=i||{},this.config=e.extend({},{days:["日","一","二","三","四","五","六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],onClose:function(){return!1},onOpen:function(){return!1},onSelect:function(){return!1}},i),this.initDatepicker(t,this.config),a.push(this),this};n.prototype={_event:function(){var t=this;e(t.el).on("click",function(){return t.isOpen()?t.close():t.open(),!1}),t.$dateArea.on("click",".g-datepicker-preyear",function(e){t.setDatepicker(t.month,t.year-1)}),t.$dateArea.on("click",".g-datepicker-premonth",function(e){t.setDatepicker(t.month-1,t.year)}),t.$dateArea.on("click",".g-datepicker-nextyear",function(e){t.setDatepicker(t.month,t.year+1)}),t.$dateArea.on("click",".g-datepicker-nextmonth",function(e){t.setDatepicker(t.month+1,t.year)}),t.$dateArea.on("click",".g-datepicker-date",function(i){if(e(this).hasClass("disabled"))return!1;var a=e(i.target).html();a&&(t.config.onSelect(),t.pick(t.year,t.month,a),t.close())}),e(document.body).on("click",function(t){0===e(t.target).closest(".g-datepicker").length&&e.each(a,function(e,t){t.close()})}),e(window).on("resize",function(){t.rePos()})},_initRender:function(){var e="";return e+='<div class="g-datepicker">',e+='\t<div class="g-datepicker-container">',e+='\t\t<div class="g-datepicker-title">',e+='\t\t\t<span class="g-datepicker-preyear"><i class="fa fa-angle-double-left"></i></span>',e+='\t\t\t<span class="g-datepicker-premonth"><i class="fa fa-angle-left"></i></span>',e+='\t\t\t<span class="g-datepicker-curmonth"></span>',e+='\t\t\t<span class="g-datepicker-curyear"></span>',e+='\t\t\t<span class="g-datepicker-nextmonth"><i class="fa fa-angle-right"></i></span>',e+='\t\t\t<span class="g-datepicker-nextyear"><i class="fa fa-angle-double-right"></i></span>',e+="\t\t</div>",e+='\t\t<div class="g-datepicker-header">',e+=this._renderHeader(),e+="\t\t</div>",e+='\t\t<div class="g-datepicker-content">',e+="\t\t\t",e+="\t\t</div>",e+="\t</div>",e+="</div>"},_renderHeader:function(){for(var e=this.config.days,t="",i=0;i<e.length;i++)t+='<span class="g-datepicker-day">'+this.config.days[i]+"</span>";return t},_renderPicker:function(e,i,a,n){this.$dateArea.find(".g-datepicker-content").empty(),this.year=e,this.month=i,this.dateTime=new Date(this.year,this.month-1,1),this.$dateArea.find(".g-datepicker-curmonth").html(this.config.months[i-1]),this.$dateArea.find(".g-datepicker-curyear").html(e);for(var r="",s=[],c=0;c<a;c++)s.unshift("");for(var o=0;o<n;o++)s.push(o+1);for(var h=s.length,d=0;d<h;d++){0!==d&&d%7==0&&(r+="<br>");var p="";this.selectDatetime.getFullYear()===+e&&this.selectDatetime.getMonth()===+i-1&&this.selectDatetime.getDate()===+s[d]&&(p+=" active"),this.startCriticalTime&&+new Date(this.year,this.month-1,+s[d])<this.startCriticalTime?p+=" disabled":this.endCriticalTime&&+new Date(this.year,this.month-1,+s[d])>this.endCriticalTime&&(p+=" disabled"),s[d]?r+='<span class="g-datepicker-date'+p+'">'+t(s[d])+"</span>":r+='<span class="g-datepicker-date empty"></span>'}this.$dateArea.find(".g-datepicker-content").html(r)},initDatepicker:function(t,a){this.el=t,this.config=a,this.year=+a.year==+a.year?+a.year:(new Date).getFullYear(),this.month=+a.month==+a.month?+a.month:(new Date).getMonth()+1,this.date=+a.date==+a.date?+a.date:(new Date).getDate(),this.dateTime=new Date(this.year,this.month-1,1),this.selectDatetime=new Date(this.year,this.month-1,this.date),this.startCriticalTime=a.startCriticalTime||0,this.endCriticalTime=a.endCriticalTime||0;var n=this._initRender();0===e("#g-datepicker-css").length&&e("body").prepend(i),this.$dateArea=e(n),e("body").append(this.$dateArea),this.rePos(),this._event(),this.initDate()},initDate:function(){var e=new Date;this.setDatepicker(e.getMonth()+1,e.getFullYear())},setDatepicker:function(e,t){t=+t==+t?+t:this.year,e=+e==+e?+e:this.month;var i=new Date(t,e-1,1),a=new Date(t,e,0),n=i.getDay(),r=a.getDate();t=i.getFullYear(),e=i.getMonth()+1,this._renderPicker(t,e,n,r)},pick:function(i,a,n){this.date=n,this.setDatepicker(a,i),this.$dateArea.find(".g-datepicker-date").each(function(t,i){+e(i).html()==+n?e(i).addClass("active"):e(i).removeClass("active")}),this.selectDatetime=new Date(this.year,this.month-1,this.date);var r=this.year+"-"+t(this.month)+"-"+t(n);e(this.el).val(r)},rePos:function(){var t=e(this.el).offset().left,i=e(this.el).offset().top,a=e(this.el).height();this.$dateArea.css({left:t,top:i+a+5})},setDisabled:function(e,t){"string"==typeof e&&(e=e.replace(/-/g,"/")),"string"==typeof t&&(t=t.replace(/-/g,"/")),this.startCriticalTime=+new Date(e),this.endCriticalTime=+new Date(t),this.setDatepicker(this.month,this.year)},isOpen:function(){return this.$dateArea.is(":visible")},open:function(){this.config.onOpen(),this.rePos(),this.$dateArea.show()},close:function(){this.config.onClose(),this.rePos(),this.$dateArea.hide()}},window.GDatepicker=n}var t={};"function"==typeof define&&define.amd?define("GDatepicker",["require","jquery"],function(i){return e(i("jquery")),t}):"object"==typeof module&&"object"==typeof module.exports?(e(require("jquery")),module.exports=t):e(window.jQuery)}();