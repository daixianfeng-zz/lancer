!function(){function e(){t.toDate=function(e){if("number"==typeof e||e instanceof Date)return new Date(e);if(!e||!e.match)return new Date;var t=new Date,a=/((\d{2,4})-(\d{1,2})(-(\d{1,2}))?)?\s{0,1}((\d{1,2}):(\d{1,2})(:(\d{1,2}))?)?/,r=e.match(a),n=r[2]?+r[2]:t.getFullYear(),o=r[3]?+r[3]:t.getMonth()+1,s=r[5]?+r[5]:t.getDate(),u=r[7]?+r[7]:0,c=r[8]?+r[8]:0,i=r[10]?+r[10]:0;return new Date(+n,+o-1,+s,+u,+c,+i)},t.datetimeFormat=function(e,a,r){if(r=void 0===r?0:r,!e&&0!==e||e===r)return"";var n=["周日","周一","周二","周三","周四","周五","周六"],o=(e=t.toDate(e)).getFullYear(),s=("0"+o%100).slice(-2),u=("0"+(e.getMonth()+1)).slice(-2),c=("0"+e.getDate()).slice(-2),i=("0"+e.getHours()).slice(-2),f=("0"+e.getMinutes()).slice(-2),D=("0"+e.getSeconds()).slice(-2),l=n[e.getDay()],d="",m=a||"YYYY-MM-DD";if("before"===a){var g=new Date(e).setHours(0,0,0,0),h=(+(new Date).setHours(0,0,0,0)-g)/1e3/3600/24;1===h?d="昨日 ":0===h&&(d="今日 "),m=i+":"+f+":"+D}else{if("time"===a)return i+":"+f+":"+D;m=(m=(m=(m=(m=(m=(m=(m=m.replace("YYYY",o)).replace("YY",s)).replace("MM",u)).replace("DD",c)).replace("HH",i)).replace("mm",f)).replace("ss",D)).replace("dd",l)}return d+m},t.datetimeBeforeFormat=function(e,a,r,n){if(n=void 0===n?0:n,!e&&0!==e||e===n)return"";e=t.toDate(e);var o=new Date,s="",u=Math.floor((+o-e)/1e3/3600/24/365),c=Math.floor((+o-e)/1e3/3600/24/30),i=Math.floor((+o-e)/1e3/3600/24),f=Math.floor((+o-e)/1e3/3600),D=Math.floor((+o-e)/1e3/60),l=!1;switch(s+=u>0?u+"年前":c>0?c+"月前":i>0?i+"日前":f>0?f+"小时前":D>0?D+"分钟前":"刚刚",a){case"year":l=u>0;break;case"month":l=c>0;break;case"day":l=i>0;break;case"hour":l=f>0;break;case"minute":l=D>0;break;default:l=!1}return l&&(s=t.datetimeFormat(e,r)),s},t.transMonth=function(e,a){var r=(e=t.toDate(e)).getDate(),n=new Date(+e);return n.setDate(1),n.setMonth(n.getMonth()+a+1),n.setDate(0),n.getDate()>r&&n.setDate(r),n},t.transYear=function(e,a){return t.transMonth(e,12*a)},t.transNormal=function(e,a,r){e=t.toDate(e);var n=new Date(+e);switch(r){case"day":n.setDate(n.getDate()+a);break;case"hour":n.setHours(n.getHours()+a);break;case"minute":n.setMinutes(n.getMinutes()+a);break;case"second":n.setSeconds(n.getSeconds()+a);break;default:n.setDate(n.getDate()+a)}return n},t.transDay=function(e,a){return t.transNormal(e,a,"day")},t.transHour=function(e,a){return t.transNormal(e,a,"hour")},t.transMinute=function(e,a){return t.transNormal(e,a,"minute")},t.transSecond=function(e,a){return t.transNormal(e,a,"second")},window.gDate=t}var t=window.gDate||{};"function"==typeof define&&define.amd?define("gDate",["require"],function(a){return e(),t}):"object"==typeof module&&"object"==typeof module.exports?(e(),module.exports=t):e()}();