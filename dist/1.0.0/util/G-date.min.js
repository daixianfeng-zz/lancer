!function(){function e(){t.toDate=function(e){if("number"==typeof e)return new Date(e);if(!e||!e.match)return new Date;var t=new Date,a=/((\d{2,4})-(\d{1,2})-(\d{1,2}))?\s{0,1}((\d{1,2}):(\d{1,2}):(\d{1,2}))?/,r=e.match(a),o=r[2]?+r[2]:t.getFullYear(),n=r[3]?+r[3]:t.getMonth()+1,i=r[4]?+r[4]:t.getDate(),c=r[6]?+r[6]:0,u=r[7]?+r[7]:0,f=r[8]?+r[8]:0;return new Date(+o,+n-1,+i,+c,+u,+f)},t.datetimeFormat=function(e,a,r){if(r=void 0===r?0:r,!e&&0!==e||e===r)return"";var o=["周日","周一","周二","周三","周四","周五","周六"],n=(e=t.toDate(e)).getFullYear(),i=("0"+n%100).slice(-2),c=("0"+(e.getMonth()+1)).slice(-2),u=("0"+e.getDate()).slice(-2),f=("0"+e.getHours()).slice(-2),l=("0"+e.getMinutes()).slice(-2),d=("0"+e.getSeconds()).slice(-2),s=o[e.getDay()],D="",m=a||"YYYY-MM-DD";if("before"===a){var p=new Date(e).setHours(0,0,0,0),g=(+(new Date).setHours(0,0,0,0)-p)/1e3/3600/24;1===g?D="昨日 ":0===g&&(D="今日 "),m=f+":"+l+":"+d}else{if("time"===a)return f+":"+l+":"+d;m=(m=(m=(m=(m=(m=(m=(m=m.replace("YYYY",n)).replace("YY",i)).replace("MM",c)).replace("DD",u)).replace("HH",f)).replace("mm",l)).replace("ss",d)).replace("dd",s)}return D+m},t.datetimeBeforeFormat=function(e,a,r,o){if(o=void 0===o?0:o,!e&&0!==e||e===o)return"";e=t.toDate(e);var n=new Date,i="",c=Math.floor((+n-e)/1e3/3600/24/365),u=Math.floor((+n-e)/1e3/3600/24/30),f=Math.floor((+n-e)/1e3/3600/24),l=Math.floor((+n-e)/1e3/3600),d=Math.floor((+n-e)/1e3/60),s=!1;switch(i+=c>0?c+"年前":u>0?u+"月前":f>0?f+"日前":l>0?l+"小时前":d>0?d+"分钟前":"刚刚",a){case"year":s=c>0;break;case"month":s=u>0;break;case"day":s=f>0;break;case"hour":s=l>0;break;case"minute":s=d>0;break;default:s=!1}return s&&(i=t.datetimeFormat(e,r)),i},window.gDate=t}var t=window.gDate||{};"function"==typeof define&&define.amd?define("gDate",["require"],function(a){return e(),t}):"object"==typeof module&&"object"==typeof module.exports?(e(),module.exports=t):e()}();