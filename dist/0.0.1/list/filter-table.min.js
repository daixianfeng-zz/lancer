!function(){function t(t,e,i){var n={tableNowrap:{tableLayout:"fixed",width:"100%"},tableTdNowrap:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},a={tableClass:"",tableTextAlign:"left",theadTextAlign:"left",nowrap:!0,filterItem:!1,filterContainer:"#filter-content",filterItemClass:"filter-item",filterActiveClass:"active",pageConfig:{},col:[{thead:"标题",order:!0,textAlign:"left",dataName:"key"}],getData:function(t,e){e([])}},r=function(e,i){return this.el=e,this.conf=t.extend({},a,i),this.init(),this};return r.prototype={_getData:function(t,e){var i=this;this.conf.getData(t,function(t,n){i.renderData(t),n&&i.pagination.render(n),e&&e(t,n)})},_render:function(){var e=this.el,i=this.conf;t(e).addClass("filter-table");var n="";t.each(i.col,function(t,e){var i="";e.order&&(i='<i class="order-icon"></i>'),n+='<th style="width:'+e.width+';" data-num='+(t+1)+">"+e.thead+i+"</th>"}),t(e).append('<thead class="filter-thead"><tr>'+n+'</tr></thead><tbody class="filter-tbody"></tbody>')},_event:function(){var e=this.el,i=this.conf,n=this;i.filterItem&&t(i.filterContainer).find("."+i.filterItemClass).on("click",function(){t(this).addClass(i.filterActiveClass),t(this).siblings("."+i.filterItemClass).removeClass(i.filterActiveClass);var e=t(this).attr("data-filter");return n._getData(i.filterItem[e].conditions,function(t,a){n.conditions=i.filterItem[e].conditions}),!1});var a=0;t(e).find(".filter-thead").on("click","th",function(){if(1===t(this).find(".order-icon").length){var i=t(this).attr("data-num"),r=[],o=[];t(e).find(".filter-tbody").find('td[data-order="'+i+'"]').each(function(){r.push(t(this).closest("tr")),o.push(t(this).text())}),0==a?(n._sortTable(r,o),a=1):1==a&&(n._sortTable(r,o).reverse(),a=0),t(e).find(".filter-tbody tr").remove(),t(e).find(".filter-tbody").append(r)}})},_sortTable:function(t,e){for(var i=0;i<t.length-1;i++)for(var n=0,a=0,r=0;n<t.length-1-i;n++)e[n]>e[n+1]&&(a=t[n],r=e[n],t[n]=t[n+1],e[n]=e[n+1],t[n+1]=a,e[n+1]=r);return t},init:function(){var e=this.el,a=this,r=this.conf;this._render(),t(e).css(n.tableNowrap),r.nowrap&&this.setNowrap(),r.page&&(a.pagination=new i(r.page,function(e){a._getData(t.extend({},a.conditions,{page:e}))},r.pageConfig)),this.specialCol(),this._event(),t(e).find(".filter-item").length>0?t(e).find(".filter-item").first().trigger("click"):a._getData({})},setNowrap:function(){var e=this.el;t(e).find(".filter-thead th").css(n.tableTdNowrap),t(e).find(".filter-tbody td").css(n.tableTdNowrap)},specialCol:function(){var e=this.conf,i=this.el;e.col.textAlign=e.col.textAlign?e.col.textAlign:e.tableTextAlign,t(i).css("textAlign",e.tableTextAlign),t(i).find(".filter-thead th").css("textAlign",e.theadTextAlign),t.each(e.col,function(e,n){t(i).find('td[data-order="'+(e+1)+'"]').css("textAlign",n.textAlign)})},renderData:function(e){var i=this.el,n=this.conf,a="",r="";t(i).find(".filter-tbody tr").remove(),this.conf.format&&(e=this.conf.format(e)),t.each(e,function(e,o){t.each(n.col,function(t,e){var i=e.dataName;a+='<td data-order="'+(t+1)+'">'+o[i]+"</td>"}),t(r="<tr>"+a+"</tr>").data("tr-data",o).appendTo(t(i).find(".filter-tbody")),a=""}),r="",n.nowrap&&this.setNowrap(),this.specialCol()}},r}"function"==typeof define&&define.amd?define("GFilterTable",["require","jquery","G","GPagination"],function(e){return t(e("jquery"),e("G"),e("GPagination"))}):"object"==typeof module&&"object"==typeof module.exports?module.exports=t(require("jquery"),require("G"),require("GPagination")):window.FilterTable=t(window.jQuery,window.G)}();